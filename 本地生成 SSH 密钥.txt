ç›®æ ‡
åœ¨æœ¬åœ°ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼ˆç§é’¥ + å…¬é’¥ï¼‰
å°†å…¬é’¥ä¸Šä¼ åˆ°è¿œç¨‹æœåŠ¡å™¨çš„ ~/.ssh/authorized_keys
éªŒè¯æ˜¯å¦èƒ½å…å¯† SSH ç™»å½•
è®© Git èƒ½é€šè¿‡ SSH å…å¯† push åˆ°ä½ çš„ Git ä»“åº“

åœ¨Win10ç³»ç»Ÿä¸‹ä½¿ç”¨çš„æ˜¯mingw64 
#ssh-keygen -t ed25519 -C "your_email@example.com"
å¦‚æœæç¤º ed25519 ä¸æ”¯æŒï¼ˆæå°‘è§ï¼‰ï¼Œæ”¹ç”¨ï¼š
#ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
æ“ä½œæç¤ºï¼š
Enter file in which to save the key: ç›´æ¥å›è½¦ï¼ˆé»˜è®¤ ~/.ssh/id_ed25519ï¼‰
Enter passphrase (empty for no passphrase): ç›´æ¥å›è½¦ï¼ˆç•™ç©ºï¼ï¼‰
â†’ è¿™æ ·ç§é’¥æ‰ä¸ä¼šæ¯æ¬¡ä½¿ç”¨éƒ½è¦æ±‚è¾“å¯†ç 
âœ… å®Œæˆåä½ ä¼šçœ‹åˆ°ï¼š
Your identification has been saved in /c/Users/YourName/.ssh/id_ed25519
Your public key has been saved in /c/Users/YourName/.ssh/id_ed25519.pub

ç¬¬äºŒæ­¥ï¼šæŠŠå…¬é’¥ä¼ åˆ°æœåŠ¡å™¨ï¼ˆåªéœ€ä¸€æ¬¡ï¼‰
æ–¹æ³• Aï¼šç”¨ ssh-copy-idï¼ˆå¦‚æœå¯ç”¨ï¼ŒGit Bash æ”¯æŒï¼‰
#ssh-copy-id -i ~/.ssh/id_ed25519.pub user@server_ip
å®ƒä¼šè‡ªåŠ¨åˆ›å»º ~/.ssh ç›®å½•ã€è®¾ç½®æƒé™ï¼Œå¹¶è¿½åŠ å…¬é’¥åˆ° authorized_keysã€‚
ä¼šæç¤ºä½ è¾“å…¥ä¸€æ¬¡å¯†ç ï¼Œä¹‹åå°±å…å¯†äº†ã€‚

æ–¹æ³• Bï¼šæ‰‹åŠ¨ä¸Šä¼ ï¼ˆå…¼å®¹æ‰€æœ‰ç¯å¢ƒï¼‰
å¦‚æœä½ çš„ Git Bash æ²¡æœ‰ ssh-copy-idï¼Œç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
# è¯»å–å…¬é’¥å†…å®¹å¹¶è¿½åŠ åˆ°æœåŠ¡å™¨
#cat ~/.ssh/id_ed25519.pub | ssh user@server_ip "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"
ğŸ” è¿™æ¡å‘½ä»¤ä¼šï¼š
åˆ›å»º ~/.ssh ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
è®¾ç½®æ­£ç¡®æƒé™ï¼ˆSSH è¦æ±‚ä¸¥æ ¼æƒé™ï¼Œå¦åˆ™æ‹’ç»åŠ è½½ï¼‰
æŠŠä½ çš„å…¬é’¥è¿½åŠ åˆ° authorized_keys
è®¾ç½® authorized_keys æƒé™ä¸º 600

ğŸ” ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•å…å¯† SSH ç™»å½•
#ssh user@server_ip
âœ… å¦‚æœç›´æ¥ç™»å½•æˆåŠŸï¼Œæ²¡æœ‰æç¤ºè¾“å…¥å¯†ç ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼

ğŸ’¡ å¦‚æœå¤±è´¥ï¼Œå¸¸è§åŸå› ï¼š
æœåŠ¡å™¨ ~/.ssh æˆ– authorized_keys æƒé™ä¸å¯¹ï¼ˆå¿…é¡»æ˜¯ 700 å’Œ 600ï¼‰
æœåŠ¡å™¨ /etc/ssh/sshd_config ä¸­ PubkeyAuthentication è¢«ç¦ç”¨ï¼ˆä½†ç»å¤§å¤šæ•° Linux é»˜è®¤å¼€å¯ï¼‰
SELinux æˆ–é˜²ç«å¢™å¹²æ‰°ï¼ˆè¾ƒå°‘è§ï¼‰

ğŸ”„ ç¬¬å››æ­¥ï¼šç¡®ä¿ Git ä½¿ç”¨è¿™ä¸ª SSH å¯†é’¥
æ£€æŸ¥ä½ çš„ Git remote URL æ˜¯å¦æ˜¯ SSH æ ¼å¼ï¼š
åº”è¯¥ç±»ä¼¼ï¼š
origin  ssh://user@server_ip/path/to/repo.git (fetch)
origin  ssh://user@server_ip/path/to/repo.git (push)
å¦‚æœä¸æ˜¯ï¼Œæ”¹æˆ SSH æ ¼å¼ï¼š
#git remote set-url origin ssh://user@server_ip/full/path/to/your/repo.git
âš ï¸ æ³¨æ„ï¼šè·¯å¾„è¦æ˜¯æœåŠ¡å™¨ä¸Šçš„ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ï¼š
ssh://git@192.168.1.100/home/git/myproject.git

ğŸ§ª ç¬¬äº”æ­¥ï¼šæµ‹è¯• Git pushï¼ˆå…å¯†ï¼‰
#git add .
#git commit -m "test"
#git push origin backup/auto-save
âœ… å¦‚æœæ²¡æœ‰æç¤ºè¾“å…¥å¯†ç ï¼Œå¹¶ä¸”æ¨é€æˆåŠŸï¼Œå¤§åŠŸå‘Šæˆï¼

ğŸ§¹ è¡¥å……ï¼šå¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰
ç™»å½•æœåŠ¡å™¨ï¼Œæ‰‹åŠ¨æ£€æŸ¥æƒé™ï¼š
#ç¡®ä¿ ~/.ssh æ‰€å±ç”¨æˆ·æ˜¯ä½ è‡ªå·±ï¼ˆä¸æ˜¯ rootï¼‰ã€‚


=========================
å¦å¤–åˆ›å»ºgitè‡ªåŠ¨å¤‡ä»½æ•°æ®æµç¨‹
åªéœ€è¦ä¸€æ¬¡

# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°å¤‡ä»½åˆ†æ”¯ï¼ˆåå­—å¯è‡ªå®šä¹‰ï¼‰
#git checkout -b backup/auto-save

# æ¨é€åˆ°è¿œç¨‹ï¼ˆé¦–æ¬¡ï¼‰
#git push -u origin backup/auto-save

# åˆ‡å›ä½ çš„å·¥ä½œåˆ†æ”¯ï¼ˆæ¯”å¦‚ mainï¼‰
#git checkout main
è¯´æ˜ï¼šbackup/auto-save æ˜¯ä¸€ä¸ªåˆæ³•çš„åˆ†æ”¯åï¼ˆGit æ”¯æŒ /ï¼Œä¼šè¢«è§†ä¸ºå±‚çº§å‘½åï¼Œä½†æœ¬è´¨ä»æ˜¯æ™®é€šåˆ†æ”¯ï¼‰

åæœŸæ¸…ç†ï¼šä¸€é”®åˆ é™¤å¤‡ä»½åˆ†æ”¯
# åˆ é™¤æœ¬åœ°å¤‡ä»½åˆ†æ”¯
#git branch -d backup/auto-save

# åˆ é™¤è¿œç¨‹å¤‡ä»½åˆ†æ”¯
#git push origin --delete backup/auto-save